<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Using Ceilometer and Gnocchi for metrics and events :: Interacting with Ansible Lightspeed</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Interacting with Ansible Lightspeed</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/course-starter-template/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rcb-demo-1" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Interacting with Ansible Lightspeed</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../basics-of-ansible-lightspeed/basics-of-ansible-lightspeed.html">Basics of Ansible Lightspeed</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics-of-ansible-lightspeed/understanding-the-core-concepts-of-ansible-and-its-integration-with-rhel.html">Understanding the core concepts of Ansible and its integration with RHEL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics-of-ansible-lightspeed/exploring-key-features-and-benefits-of-using-ansible-for-system-management.html">Exploring key features and benefits of using Ansible for system management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics-of-ansible-lightspeed/setting-up-and-configuring-a-basic-ansible-environment-for-rhel-systems.html">Setting up and configuring a basic Ansible environment for RHEL systems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics-of-ansible-lightspeed/learning-about-the-role-of-ansible-lightspeed-in-automating-and-streamlining-tasks.html">Learning about the role of Ansible Lightspeed in automating and streamlining tasks</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-labs-with-ansible-lightspeed/hands-on-labs-with-ansible-lightspeed.html">Hands-on Labs with Ansible Lightspeed</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-labs-with-ansible-lightspeed/setting-up-a-lab-environment-for-practicing-ansible-lightspeed-commands.html">Setting up a lab environment for practicing Ansible Lightspeed commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-labs-with-ansible-lightspeed/installing-necessary-software-packages-ansible-rhel.html">Installing necessary software packages (Ansible, RHEL)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-labs-with-ansible-lightspeed/configuring-network-settings-for-controlled-testing.html">Configuring network settings for controlled testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-labs-with-ansible-lightspeed/creating-simple-ansible-playbooks-for-managing-rhel-systems.html">Creating simple Ansible playbooks for managing RHEL systems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-labs-with-ansible-lightspeed/writing-basic-tasks-for-installing-software-and-configuring-services.html">Writing basic tasks for installing software and configuring services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-labs-with-ansible-lightspeed/running-ansible-lightspeed-commands-to-automate-system-management.html">Running Ansible Lightspeed commands to automate system management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-labs-with-ansible-lightspeed/using-lightspeed-features-like-recommendations-and-remediation.html">Using Lightspeed features like recommendations and remediation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-labs-with-ansible-lightspeed/validating-and-troubleshooting-ansible-playbook-executions.html">Validating and troubleshooting Ansible playbook executions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-labs-with-ansible-lightspeed/identifying-common-issues-and-learning-resolution-strategies.html">Identifying common issues and learning resolution strategies</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Interacting with Ansible Lightspeed</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Interacting with Ansible Lightspeed</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Interacting with Ansible Lightspeed</a></li>
    <li><a href="using-ceilometer-and-gnocchi-for-metrics-and-events.html">Using Ceilometer and Gnocchi for metrics and events</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Using Ceilometer and Gnocchi for metrics and events</h1>
<div class="sect2">
<h3 id="_using_ceilometer_and_gnocchi_for_metrics_and_events"><a class="anchor" href="#_using_ceilometer_and_gnocchi_for_metrics_and_events"></a>Using Ceilometer and Gnocchi for Metrics and Events</h3>
<div class="paragraph">
<p>Ceilometer and Gnocchi are two essential metering services in Red Hat OpenStack Platform (RHOSP) used for collecting, storing, and providing access to infrastructure metrics data. These services help users monitor their cloud environments by gathering critical information about resource usage, performance, and events. In this section, we will delve into Ceilometer and Gnocchi, understanding their roles and learning how to use them effectively for monitoring RHOSP deployments.</p>
</div>
<div class="sect3">
<h4 id="_ceilometer_a_meter_aggregator"><a class="anchor" href="#_ceilometer_a_meter_aggregator"></a>Ceilometer: A Meter Aggregator</h4>
<div class="paragraph">
<p>Ceilometer is a metering service in OpenStack that collects, stores, and provides access to infrastructure metrics data. It gathers data from various sources such as Nova (Compute), Glance (Image Service), Neutron (Networking), and Cinder (Block Storage). Ceilometer aggregates these raw metric data points into meaningful measurements for further analysis and monitoring purposes.</p>
</div>
<div class="paragraph">
<p><strong>Key features of Ceilometer:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Data Collection</strong>: Gathers raw metrics from multiple OpenStack services and transforms them into standardized, consistent formats.</p>
</li>
<li>
<p><strong>Metadata</strong>: Allows attaching additional metadata to collected metrics, such as timestamps or source identifiers for more context.</p>
</li>
<li>
<p><strong>Aggregation</strong>: Aggregates metering data for various purposes like summing up resource usage over time.</p>
</li>
<li>
<p><strong>Transport Mechanisms</strong>: Provides different transport mechanisms (e.g., message queues, databases) to store and forward the collected data.</p>
</li>
<li>
<p><strong>Notifications</strong>: Sends alerts or notifications based on specific metric thresholds or events.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_gnocchi_a_time_series_database_for_metrics"><a class="anchor" href="#_gnocchi_a_time_series_database_for_metrics"></a>Gnocchi: A Time-Series Database for Metrics</h4>
<div class="paragraph">
<p>Gnocchi is an archive service in OpenStack designed to store and retrieve time-series data, such as metrics gathered by Ceilometer. It provides a scalable, efficient method of storing massive amounts of metric data over extended periods.</p>
</div>
<div class="paragraph">
<p><strong>Key features of Gnocchi:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Scalability</strong>: Handles large volumes of time-series data efficiently using technologies like PostgreSQL for backend storage and Whisper for aggregation.</p>
</li>
<li>
<p><strong>Time-Series Data Storage</strong>: Optimized for querying, retrieving, and aggregating time-series data over customizable time ranges.</p>
</li>
<li>
<p><strong>Data Ingestion</strong>: Accepts metric data from Ceilometer or other sources via its API or message queues (e.g., AMQP).</p>
</li>
<li>
<p><strong>Resource Allocation</strong>: Allows users to define resource allocation policies for data retention, compression, and storage location.</p>
</li>
<li>
<p><strong>Querying and Analysis</strong>: Provides a flexible query language and an API for advanced querying and data analysis.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_integrating_ceilometer_and_gnocchi"><a class="anchor" href="#_integrating_ceilometer_and_gnocchi"></a>Integrating Ceilometer and Gnocchi</h4>
<div class="paragraph">
<p>In a typical RHOSP deployment, Ceilometer and Gnocchi work together to provide comprehensive monitoring capabilities:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Metric Collection</strong>: Ceilometer gathers raw metrics from various OpenStack services.</p>
</li>
<li>
<p><strong>Data Aggregation</strong>: Ceilometer processes, aggregates, and enriches the collected metrics data.</p>
</li>
<li>
<p><strong>Data Storage</strong>: Processed metrics are forwarded to Gnocchi for archival and efficient long-term storage.</p>
</li>
<li>
<p><strong>Querying and Analysis</strong>: Users can query Gnocchi&#8217;s time-series database using its API or a command-line tool (gnocchi) to analyze historical metric data, generate reports, and set up alerts based on thresholds.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_practical_hands_on_activity_using_ceilometer_and_gnocchi"><a class="anchor" href="#_practical_hands_on_activity_using_ceilometer_and_gnocchi"></a>Practical Hands-on Activity: Using Ceilometer and Gnocchi</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Deploy RHOSP</strong>: Ensure you have an operational RHOSP environment with Ceilometer and Gnocchi installed and configured properly.</p>
</li>
<li>
<p><strong>Verify Metric Collection</strong>: Check that Ceilometer is successfully collecting metrics from relevant OpenStack services (e.g., Nova, Neutron).</p>
</li>
<li>
<p><strong>View Metrics in Horizon</strong>: Access the Horizon dashboard to view basic metric data and verify that Ceilometer is forwarding metrics to Gnocchi.</p>
</li>
<li>
<p><strong>Query Gnocchi</strong>: Use <code>gnocchi</code> command-line tool or its API to query historical metrics data, for example, CPU usage over a specific time range.</p>
</li>
<li>
<p><strong>Set Up Alerts</strong>: Configure Ceilometer notifications based on predefined thresholds (e.g., CPU utilization exceeding 80%) and test alert mechanisms.</p>
</li>
<li>
<p><strong>Analyze Metrics Data</strong>: Generate reports or dashboards using the collected metrics data to gain insights into resource usage patterns and identify potential performance bottlenecks.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>By following this hands-on activity, you will gain practical experience in using Ceilometer and Gnocchi for collecting, storing, and analyzing infrastructure metrics within a Red Hat OpenStack Platform environment. This understanding is crucial for efficient monitoring, troubleshooting, and resource optimization in cloud deployments.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
